<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">        
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
        <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
        <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
        <link rel="stylesheet" href="/static/css/home.css">
        <title>User Home Page</title>
    </head>
    <body>
        <div class="container">
            <img src="https://cdn0.iconfinder.com/data/icons/miscellaneous-51-line/128/tourism_touring_ramble_excursion_travel-512.png"
           style="float: left;margin-left: 100px;margin-top: 15px;margin-right: 20px;" width="55" height="55">
            <p class="text-big">Bon Voyage</p>
            <div class="btn-group" style="margin-top:-7px;margin-left: 1000px;">
                <button type="button" class="btn btn-outline-light btn-md main-button" disabled="disabled">
                    <span class="bi bi-person" style="font-size: 22px;"></span>
                    <span style="margin-left: 4px;">{{user}}</span>
                </button>
                <button type="button" class="btn btn-outline-light btn-md sub-button" data-toggle="dropdown" 
                        style="border-top-right-radius: 3.5px; border-bottom-right-radius: 3.5px;">
                    <span class="glyphicon glyphicon-tasks"></span>
                </button>
                <ul class="dropdown-menu" role="menu" style="margin-left: 150px;">
                    <li>
                        <a href="#" id="myProfile">My Profile</a>
                        <script>
                            $(function() {
                                $('#myProfile').click(function() {
                                    $("#profile").show();
                                });
                            });
                        </script>
                    </li>
                    <li>
                        <a href="#" style="text-decoration:line-through;">My Rewards</a>
                    </li>
                    <li>
                        <a href="#" id="myTrips" style="text-decoration:line-through;">My Trips</a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="http://127.0.0.1:5000/">Log Out</a>
                    </li>
                </ul>
            </div>
        </div>
        <form method="POST">
            <div class="middle-section">
                <div class="sub-section">
                    <br><br><br><br>
                    <h4 style="margin-left:20px;font-size: 17px;"><b>States</b></h4>
                    <div style="font-size: 16px;margin-left: 30px;">
                        {% for j in range(0,len_location) %}
                            <div class="form-check">
                                <li type="circle">
                                    <label class="form-check-label" for="check{{j}}" style="font-weight:normal;">{{location[j]}}</label>    
                                </li>                            
                            </div>
                        {% endfor %}
                    </div>
                    <br>
                    <label style="margin-left: 80px;" for="time">Travel Date : </label>
                    <input type="datetime-local" id="time" name="time" style="margin-left: 22px;">
                    <br><br>
                    <div style="margin-left: 25px;" class="inputBox">
                        <label> Pick Up Point </label>
                        <input type="text" name="pickpoint" required>  
                    </div>
                    <br><br>
                    <div style="margin-left: 25px;" class="inputBox">
                        <label> Drop Point </label>
                        <input type="text" name="droppoint" required> 
                    </div>
                    <span id="demo1"></span>
                </div>
                <div class="sub-section2">
                    {% for i in range(0,len) %}
                    <br>
                    <div class="card" style="width:900px;margin-left: -25px;box-shadow: 0 0px 5px 0px #7d2ae8;height: 250px;">
                        <div class="row">
                            <div class="col-sm-3 col-md-3">
                                <img class="card-img-top" src="{{list_list[i][2]}}" alt="Wrong Image" 
                                 style="height: 250px;width: 220px;">
                            </div>
                            <div class="col-sm-6 col-md-6" style="text-align:center;">
                                <h3 style="font-size: 24px;font-weight: bold;margin-top: 7px;">{{list_list[i][1]}}</h3>
                                <br>
                                <p>Location : {{list_list[i][3]}}</p>
                                <br><br><br>
                                <div class="row">
                                    <div class="col-sm-4 col-md-4">
                                        <img src="https://wikidownload.com/Download/Home-icon.png" style="width: 45px;height: 45px;">
                                        <p style="font-size: 13px;">Hotels Available<br> Near by</p>                                        
                                    </div>
                                    <div class="col-sm-4 col-md-4">
                                        <img src="https://tse3.mm.bing.net/th?id=OIP.8yi3jCLY5BHuKuxJG-xtbgHaHa&pid=Api&P=0&w=156&h=156" style="width: 45px;height: 45px;">
                                        <p style="font-size: 13px;">Sight Seeing </p>
                                    </div>
                                    <div class="col-sm-4 col-md-4">
                                        <img src="https://freesvg.org/img/Bus-Icon.png" style="width: 50px;height: 50px;">
                                        <p style="font-size: 13px;">Bus/Train fare Available</p>
                                    </div>    
                                </div>
                            </div>
                                <div class="col-sm-3 col-md-3" style="text-align:center;background-color: #e1d6f0;width: 218px;height: 250px;">
                                    <h3><i class="fa fa-rupee"></i>{{list_list[i][4]}}</h3>
                                    <br>
                                    <script>
                                        $(function() {
                                            $("#count_val{{i}}").hide();
                                        });
                                    </script>
                                    <div class="col" style="margin-left: -5px;margin-right: -20px;" id="count_val{{i}}">
                                        <div class="row-sm-6 row-md-6">
                                            <p style="font-size: 15px;background-color: #7d2ae8;color: white;width: 100px;height: 35px;text-align: center;border-radius: 5px;padding-top: 7px;float: left;">Adults</p>
                                            <input type="number" class="form-control" style="width: 100px;height: 35px;" name="adults{{i}}" id="adults{{i}}">
                                        </div>
                                        <br>
                                        <div class="row-sm-6 row-md-6">
                                            <p style="font-size: 15px;background-color: #7d2ae8;color: white;width: 100px;height: 35px;text-align: center;border-radius: 5px;padding-top: 7px;float: left;">Kids</p>
                                            <input type="number" class="form-control" style="width: 100px;height: 35px;" name="kids{{i}}" id="kids{{i}}">
                                        </div>    
                                    </div>
                                     
                                    <br>
                                    <input id="selectn{{i}}" value="{{list_list[i][0]}}" type="checkbox" data-toggle="toggle"  data-onstyle="success" data-offstyle="danger" data-on="Selected" data-off="Not Selected" data-height="35">
                                    <script>
                                        $(function() {
                                            $('#selectn{{i}}').change(function() {
                                            if($(this).prop('checked')){
                                                $("#count_val{{i}}").show();
                                            }
                                            else{
                                                $("#count_val{{i}}").hide();
                                                $("#adults{{i}}").val(null);
                                                $("#kids{{i}}").val(null);
                                            }
                                            });
                                        });
                                    </script>
                                </div>
                            </div>
                        <br>
                    </div>
                    <br>
                    {% endfor %}
                </div>
                <script>
                    $(function() {
                        $("#profile").hide();
                    });
                </script>
                <div class="sub-section3" id="profile">
                    <br><br><br>
                    <h4>Email : <span>{{details_user[0]}}</span></h4>
                    <h4>Name : <span>{{details_user[1]}}</span></h4>
                    <h4>Mobile Number : <span>{{details_user[3]}}</span></h4>
                    <h4>Date Of Birth : <span>{{details_user[4]}}</span></h4>
                    <input type="button" id="close" value="Close"></input>
                    <script>
                        $(function() {
                            $('#close').click(function() {
                                $("#profile").hide();
                            });
                        });
                    </script>
                </div>
                <input type="submit" name="proceed-button" id="proceed_button" class="book-button" value="Click Here To Proceed"></input>
            </div>
        </form>
    </body>
    <script>
        document.getElementById("proceed_button").onclick = function(){
            const arr = [];
            for(let k=0;k<parseInt('{{len}}');k++){
                let i = ''+k;
                let result1 = "#selectn".concat(i);
                if($(result1).prop('checked') == true){
                    arr.push($(result1).val());
                }
            }
            demo1.innerHTML = arr;
            document.getElementById("proceed_button").value = arr;
        }
    </script>
</html>